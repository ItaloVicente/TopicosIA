======================================================================================================================
DESCRIPTION:

MB-29029 Register with adopters before executing async body.

To guarantee that if the adopter is already dead, we don't do anything
with visible side-effects.

Change-Id: I8daa2b093cc01964e2ab0d101ffa73dd5c71161f

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Aliaksey Artamonau
Date: 2018-04-12 20:30:21.000000000
Message: 
Uploaded patch set 1.
----------------------------------------------------------------------------------------------------------------------
Author: Build Bot
Date: 2018-04-12 20:30:31.000000000
Message: 
Patch Set 1:

Build Started http://cv.jenkins.couchbase.com/job/ns-server-test/4762/
----------------------------------------------------------------------------------------------------------------------
Author: Aliaksey Artamonau
Date: 2018-04-12 20:33:04.000000000
Message: 
Patch Set 1: Verified+1
----------------------------------------------------------------------------------------------------------------------
Author: Build Bot
Date: 2018-04-12 20:35:44.000000000
Message: 
Patch Set 1: Well-Formed+1

Permission granted to commit to restricted branch
----------------------------------------------------------------------------------------------------------------------
Author: Artem Stemkovski
Date: 2018-04-17 00:47:32.000000000
Message: 
Patch Set 1: Code-Review+2
----------------------------------------------------------------------------------------------------------------------
