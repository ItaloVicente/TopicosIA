======================================================================================================================
DESCRIPTION:

MB-35560 do not count buckets that were never warmed up on the node

...when deciding to trigger autofailover

This is needed because rebalance first sets 'server' property of the
bucket and only later marks bucket as warmed up and estabishes
replications. So if the time between these 2 events is more than
5 sec, it can cause autofailover of the node and therefore rebalance
failure.

The remedy is to maintain persistent list of all buckets that might
have data (the traffic was enabled at least once) on a given node.
kv_monitor will use this list to figure out which buckets health
should be checked on the local node.

Rebalance process takes care of asking all newly nodes to exclude the
bucket from their buckets_with_data lists.

The bucket gets included into buckets_with_data list by janitor_agent
on the node after the bucket is marked as warmed.

Change-Id: Id6a082507a2867c1955d16333a860469b49f4e54
Reviewed-on: http://review.couchbase.org/115299
Tested-by: Artem Stemkovski <artem@couchbase.com>
Well-Formed: Build Bot <build@couchbase.com>
Reviewed-by: Aliaksey Artamonau <aliaksey.artamonau@couchbase.com>

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Aliaksey Artamonau
Date: 2019-10-17 20:52:02.000000000
Message: 
Change has been successfully cherry-picked as 9f9591c215699f52aa2b3e6369c30827b36185f8 by Aliaksey Artamonau
----------------------------------------------------------------------------------------------------------------------
