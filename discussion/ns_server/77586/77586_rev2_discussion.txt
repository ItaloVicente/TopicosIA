======================================================================================================================
DESCRIPTION:

re-factor compile_roles so filtering part of it can be reused

Change-Id: Ic26b1c42ee8220286f94fae44555e59ab4064928

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Artem Stemkovski
Date: 2017-05-02 06:02:33.000000000
Message: 
Uploaded patch set 2: Patch Set 1 was rebased.
----------------------------------------------------------------------------------------------------------------------
Author: Aliaksey Artamonau
Date: 2017-05-02 18:46:29.000000000
Message: 
Patch Set 2: Code-Review+2
----------------------------------------------------------------------------------------------------------------------
