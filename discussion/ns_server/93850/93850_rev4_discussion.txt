======================================================================================================================
DESCRIPTION:

Reapply the following patches after upgrading of gen_smtp:

1) MB-6131 Fix gen_smtp_client:send when callback is not undefined.
2) compile gen_smtp session behavior first

Change-Id: I295f344531c1d0bc65aa986ad6621dbe18cc6291
Reviewed-on: http://review.couchbase.org/93850
Well-Formed: Build Bot <build@couchbase.com>
Tested-by: Timofey Barmin <timofey.barmin@couchbase.com>
Reviewed-by: Artem Stemkovski <artem@couchbase.com>

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Artem Stemkovski
Date: 2018-05-11 19:58:43.000000000
Message: 
Change has been successfully cherry-picked as f3b1732296f69357490a9fb5a8162b01fd1bca54 by Artem Stemkovski
----------------------------------------------------------------------------------------------------------------------
