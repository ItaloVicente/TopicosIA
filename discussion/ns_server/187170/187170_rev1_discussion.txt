======================================================================================================================
DESCRIPTION:

MB-55513: Switch to using sigar_port JSON format

Change-Id: Id97d0183d276c82998d0648e62807b7b333ae4a8

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Neelima Premsankar
Date: 2023-02-22 00:32:40.000000000
Message: 
Uploaded patch set 1.
----------------------------------------------------------------------------------------------------------------------
Author: Build Bot
Date: 2023-02-22 00:32:48.000000000
Message: 
Patch Set 1:

Build Started https://cv.jenkins.couchbase.com/job/ns-server-test/34591/ (1/2)
----------------------------------------------------------------------------------------------------------------------
Author: Build Bot
Date: 2023-02-22 00:32:49.000000000
Message: 
Patch Set 1:

Build Started https://cv.jenkins.couchbase.com/job/ns-server-ns-test/2034/ (2/2)
----------------------------------------------------------------------------------------------------------------------
Author: Build Bot
Date: 2023-02-22 00:51:26.000000000
Message: 
Patch Set 1: Well-Formed-1

Build Failed 

https://cv.jenkins.couchbase.com/job/ns-server-test/34591/ : FAILURE

https://cv.jenkins.couchbase.com/job/ns-server-ns-test/2034/ : SUCCESS
----------------------------------------------------------------------------------------------------------------------
Author: Neelima Premsankar
Date: 2023-02-22 01:57:22.000000000
Message: 
Patch Set 1:

(1 comment)
File Comment: /PATCHSET_LEVEL -> The JSON output "Decoded" contains:
[{<<"allocstall">>,<<"-1">>},
         {<<"control_group_info">>,
          {[{<<"burst_usec">>,<<"0">>},
            {<<"memory_cache">>,<<"0">>},
            {<<"memory_current">>,<<"0">>},
            {<<"memory_max">>,<<"0">>},
            {<<"nr_bursts">>,<<"0">>},
            {<<"nr_periods">>,<<"0">>},
            {<<"nr_throttled">>,<<"0">>},
            {<<"num_cpu_prc">>,0},
            {<<"supported">>,false},
            {<<"system_usec">>,<<"0">>},
            {<<"throttled_usec">>,<<"0">>},
            {<<"usage_usec">>,<<"0">>},
            {<<"user_usec">>,<<"0">>},
            {<<"version">>,0}]}},
         {<<"cpu_idle_ms">>,<<"127378100">>},
         {<<"cpu_irq_ms">>,<<"0">>},
         {<<"cpu_stolen_ms">>,<<"0">>},
         {<<"cpu_sys_ms">>,<<"8381770">>},
         {<<"cpu_total_ms">>,<<"152572550">>},
         {<<"cpu_user_ms">>,<<"16812680">>},
         {<<"interesting_procs">>,
          [{[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"49188864">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"36563775488">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"beam.smp">>},
             {<<"page_faults">>,<<"23799">>},
             {<<"pid">>,<<"67630">>},
             {<<"ppid">>,<<"67622">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"12288">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"34401849344">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"saslauthd-port">>},
             {<<"page_faults">>,<<"220">>},
             {<<"pid">>,<<"67856">>},
             {<<"ppid">>,<<"67633">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"48476160">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"35982753792">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"prometheus">>},
             {<<"page_faults">>,<<"12564">>},
             {<<"pid">>,<<"67848">>},
             {<<"ppid">>,<<"67847">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"5111808">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"35816685568">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"goport">>},
             {<<"page_faults">>,<<"1755">>},
             {<<"pid">>,<<"67847">>},
             {<<"ppid">>,<<"67642">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"4333568">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"35814756352">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"godu">>},
             {<<"page_faults">>,<<"1311">>},
             {<<"pid">>,<<"67829">>},
             {<<"ppid">>,<<"67642">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"3133440">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"35227561984">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"bash">>},
             {<<"page_faults">>,<<"3240">>},
             {<<"pid">>,<<"67826">>},
             {<<"ppid">>,<<"67642">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"4329472">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"35814490112">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"godu">>},
             {<<"page_faults">>,<<"1305">>},
             {<<"pid">>,<<"67824">>},
             {<<"ppid">>,<<"67784">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"3092480">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"35218124800">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"bash">>},
             {<<"page_faults">>,<<"3218">>},
             {<<"pid">>,<<"67801">>},
             {<<"ppid">>,<<"67784">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"2379776">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"35082383360">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"erl_child_setup">>},
             {<<"page_faults">>,<<"1237">>},
             {<<"pid">>,<<"67784">>},
             {<<"ppid">>,<<"67778">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"99262464">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"36602785792">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"beam.smp">>},
             {<<"page_faults">>,<<"59987">>},
             {<<"pid">>,<<"67778">>},
             {<<"ppid">>,<<"67642">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"4100096">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"35230109696">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"sigar_port">>},
             {<<"page_faults">>,<<"1299">>},
             {<<"pid">>,<<"67757">>},
             {<<"ppid">>,<<"67642">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"3092480">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"35218124800">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"bash">>},
             {<<"page_faults">>,<<"3219">>},
             {<<"pid">>,<<"67643">>},
             {<<"ppid">>,<<"67642">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"2560000">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"35082391552">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"erl_child_setup">>},
             {<<"page_faults">>,<<"1971">>},
             {<<"pid">>,<<"67642">>},
             {<<"ppid">>,<<"67636">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"111513600">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"36803010560">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"beam.smp">>},
             {<<"page_faults">>,<<"64357">>},
             {<<"pid">>,<<"67636">>},
             {<<"ppid">>,<<"67633">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"4661248">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"35814621184">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"gosecrets">>},
             {<<"page_faults">>,<<"1401">>},
             {<<"pid">>,<<"67635">>},
             {<<"ppid">>,<<"67633">>}]},
           {[{<<"cpu_utilization">>,<<"0">>},
             {<<"major_faults">>,<<"0">>},
             {<<"mem_resident">>,<<"2584576">>},
             {<<"mem_share">>,<<"0">>},
             {<<"mem_size">>,<<"35082391552">>},
             {<<"minor_faults">>,<<"0">>},
             {<<"name">>,<<"erl_child_setup">>},
             {<<"page_faults">>,<<"1321">>},
             {<<"pid">>,<<"67633">>},
             {<<"ppid">>,<<"67630">>}]}]},
         {<<"mem_actual_free">>,<<"3983257600">>},
         {<<"mem_actual_used">>,<<"30376480768">>},
         {<<"mem_total">>,<<"34359738368">>},
         {<<"mem_used">>,<<"34087669760">>},
         {<<"swap_total">>,<<"0">>},
         {<<"swap_used">>,<<"0">>},
         {<<"version">>,7}]

StatsDict contains a dict() where each element is an atom/integer:
     [{allocstall,-1},
      {control_group_info,{[{burst_usec,0},
                            {memory_cache,0},
                            {memory_current,0},
                            {memory_max,0},
                            {nr_bursts,0},
                            {nr_periods,0},
                            {nr_throttled,0},
                            {num_cpu_prc,0},
                            {supported,false},
                            {system_usec,0},
                            {throttled_usec,0},
                            {usage_usec,0},
                            {user_usec,0},
                            {version,0}]}},
      {cpu_idle_ms,969366330},
      {cpu_irq_ms,0},
      {cpu_stolen_ms,0},
      {cpu_sys_ms,42260750},
      {cpu_total_ms,1108030770},
      {cpu_user_ms,96403690},
      {interesting_procs,[{[{cpu_utilization,0},
                            {major_faults,0},
                            {mem_resident,56709120},
                            {mem_share,0},
                            {mem_size,36452745216},
                            {minor_faults,0},
                            {name,'beam.smp'},
                            {page_faults,21933},
                            {pid,41137},
                            {ppid,41129}]},
                          {[{cpu_utilization,0},
                            {major_faults,0},
                            {mem_resident,4116480},
                            {mem_share,0},
                            {mem_size,35229061120},
                            {minor_faults,0},
                            {name,sigar_port},
                            {page_faults,1303},
                            {pid,41213},
                            {ppid,41165}]},
                          {[{cpu_utilization,0},
                            {major_faults,0},
                            {mem_resident,3104768},
                            {mem_share,0},
                            {mem_size,35218124800},
                            {minor_faults,0},
                            {name,bash},
                            {page_faults,3226},
                            {pid,41190},
                            {ppid,41165}]},
                          {[{cpu_utilization,0},
                            {major_faults,0},
                            {mem_resident,2412544},
                            {mem_share,0},
                            {mem_size,35082383360},
                            {minor_faults,0},
                            {name,erl_child_setup},
                            {page_faults,1195},
                            {pid,41165},
                            {ppid,41146}]},
                          {[{cpu_utilization,0},
                            {major_faults,0},
                            {mem_resident,99840000},
                            {mem_share,0},
                            {mem_size,36647165952},
                            {minor_faults,0},
                            {name,'beam.smp'},
                            {page_faults,53758},
                            {pid,41146},
                            {ppid,41141}]},
                          {[{cpu_utilization,0},
                            {major_faults,0},
                            {mem_resident,4345856},
                            {mem_share,0},
                            {mem_size,35814342656},
                            {minor_faults,0},
                            {name,gosecrets},
                            {page_faults,1317},
                            {pid,41143},
                            {ppid,41141}]},
                          {[{cpu_utilization,0},
                            {major_faults,0},
                            {mem_resident,2613248},
                            {mem_share,0},
                            {mem_size,35090780160},
                            {minor_faults,0},
                            {name,erl_child_setup},
                            {page_faults,1246},
                            {pid,41141},
                            {ppid,41137}]}]},
      {mem_actual_free,3414335488},
      {mem_actual_used,30945402880},
      {mem_total,34359738368},
      {mem_used,34209849344},
      {swap_total,0},
      {swap_used,0},
      {version,7}]
----------------------------------------------------------------------------------------------------------------------
