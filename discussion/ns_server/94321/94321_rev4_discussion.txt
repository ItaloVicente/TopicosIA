======================================================================================================================
DESCRIPTION:

Use proper gen_statem way for gen_fsm events adapting

use 'next_state' action instead of calling state handler directly

Change-Id: I219164068c65dc8d2ea8c356eee87d851889c623
Reviewed-on: http://review.couchbase.org/94321
Tested-by: Timofey Barmin <timofey.barmin@couchbase.com>
Well-Formed: Build Bot <build@couchbase.com>
Reviewed-by: Artem Stemkovski <artem@couchbase.com>
Reviewed-by: Aliaksey Artamonau <aliaksey.artamonau@couchbase.com>

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Aliaksey Artamonau
Date: 2018-05-18 20:07:08.000000000
Message: 
Change has been successfully cherry-picked as b201c8b5c317133e209dd7089f7f8cfcdf159081 by Aliaksey Artamonau
----------------------------------------------------------------------------------------------------------------------
