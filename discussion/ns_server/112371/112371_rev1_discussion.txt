======================================================================================================================
DESCRIPTION:

MB-30403 Display user name in doc read audit event

When a document is read via the REST API the audit event generated by
memcached displays the user as "ns_server".  The reason is that
ns_server is doing the request to memcached on behalf of the real user.

This change adds a ns_server read audit event using the "real" user
name.

In the future we'll implement "on behalf of" support between ns_server
and memcached so that the "real" user can be send with the request.

Change-Id: Ic972a5e2e9f5c463113507de43b65cd19ed21b16

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Steve Watanabe
Date: 2019-07-23 21:47:51.000000000
Message: 
Uploaded patch set 1.
----------------------------------------------------------------------------------------------------------------------
Author: Build Bot
Date: 2019-07-23 21:47:57.000000000
Message: 
Patch Set 1:

Build Started http://cv.jenkins.couchbase.com/job/ns-server-test/13594/
----------------------------------------------------------------------------------------------------------------------
Author: Build Bot
Date: 2019-07-23 21:52:18.000000000
Message: 
Patch Set 1: Well-Formed+1

Permission granted to commit to restricted branch
----------------------------------------------------------------------------------------------------------------------
Author: Steve Watanabe
Date: 2019-07-23 22:22:35.000000000
Message: 
Patch Set 1:

run simple-test
----------------------------------------------------------------------------------------------------------------------
Author: Build Bot
Date: 2019-07-23 22:22:42.000000000
Message: 
Patch Set 1:

Build Started http://cv.jenkins.couchbase.com/job/ns-server-simple-test/1013/
----------------------------------------------------------------------------------------------------------------------
Author: Build Bot
Date: 2019-07-23 22:55:46.000000000
Message: 
Patch Set 1: Verified+1

Build Successful 

http://cv.jenkins.couchbase.com/job/ns-server-simple-test/1013/ : SUCCESS
----------------------------------------------------------------------------------------------------------------------
Author: Steve Watanabe
Date: 2019-07-24 16:54:26.000000000
Message: 
Patch Set 1: Verified+1
----------------------------------------------------------------------------------------------------------------------
Author: Artem Stemkovski
Date: 2019-07-25 13:41:19.000000000
Message: 
Patch Set 1:

The document read audit is disabled by default. And the reason for it is performance. The new audit event that you introduce here is enabled and it's not possible to disable it.

Frankly I'm not sure how heavily this API is used. You need to make sure that Perry explicitly approves this change of the behavior.
----------------------------------------------------------------------------------------------------------------------
Author: Steve Watanabe
Date: 2019-07-25 16:34:50.000000000
Message: 
Patch Set 1:

Good point.  I'll check with Perry.
----------------------------------------------------------------------------------------------------------------------
