======================================================================================================================
DESCRIPTION:

Move node activation and some more stuff into rebalance function.

These things are tightly coupled, so it's easier to see everything
that is going on when they are in a single place.

Change-Id: I578782562fbd66eaeb10823ff01a5e6222339f3f
Reviewed-on: http://review.couchbase.org/60149
Tested-by: Aliaksey Artamonau <aliaksiej.artamonau@gmail.com>
Reviewed-by: Artem Stemkovski <artem@couchbase.com>

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Gerrit Code Review
Date: 2016-02-20 02:14:58.000000000
Message: 
Change has been successfully cherry-picked as b55357bbe511abd5776c56f1e9a74628134ea1f0
----------------------------------------------------------------------------------------------------------------------
