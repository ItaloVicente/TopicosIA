======================================================================================================================
DESCRIPTION:

indexer: async commit/snapshot in storage manager

storage manager does async commit/snapshot operation.
This allows to service the get snapshot request concurrently
while the long commit operation is in progress.
Also commits for multiple buckets can run in parallel.

Change-Id: I758ab60dfde054bf737129a23e5a804188eefbcd

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Deepkaran Salooja
Date: 2015-02-27 17:38:08.000000000
Message: 
Uploaded patch set 1.
----------------------------------------------------------------------------------------------------------------------
Author: John Liang
Date: 2015-02-27 18:00:42.000000000
Message: 
Patch Set 1: Code-Review+1
----------------------------------------------------------------------------------------------------------------------
Author: Sarath Lakshman
Date: 2015-02-27 19:42:24.000000000
Message: 
Patch Set 1:

(1 comment)
Line:218, secondary/indexer/storage_manager.go -> What would be the affect of async snapshot creation on inmemory snapshots ?
Flusher should wait until in-memory snapshot is created before inserting anymore doc into forestdb.

For creating in-memory snapshot, remember that we specify a in-memory flag instead of sequence number so that it automatically creates the snapshot with latest current sequence number. If we do not wait for snapshot to be created before inserting any item, it may create in-memory snapshot at a different timestamp.

----------------------------------------------------------------------------------------------------------------------
Author: Deepkaran Salooja
Date: 2015-02-28 03:13:56.000000000
Message: 
Patch Set 1:

(1 comment)
Line:218, secondary/indexer/storage_manager.go -> Once flusher is done, the message comes to storage manager for commit/snapshot. Next flush message gets generated by timekeeper only after storage manager sends done. So at no point, flusher and storage manager work together on a slice.

----------------------------------------------------------------------------------------------------------------------
Author: Sarath Lakshman
Date: 2015-02-28 07:20:24.000000000
Message: 
Patch Set 1: Code-Review+2
----------------------------------------------------------------------------------------------------------------------
Author: Deepkaran Salooja
Date: 2015-02-28 12:59:28.000000000
Message: 
Patch Set 2: Patch Set 1 was rebased
----------------------------------------------------------------------------------------------------------------------
Author: Gerrit Code Review
Date: 2015-02-28 13:00:02.000000000
Message: 
Change has been successfully merged into the git repository.
----------------------------------------------------------------------------------------------------------------------
