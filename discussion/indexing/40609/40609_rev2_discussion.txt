======================================================================================================================
DESCRIPTION:

Bug-fixes and refactoring.

Change-Id: I08e7bb98ef767e6b69fd9674de0d6ed0e55de429
Reviewed-on: http://review.couchbase.org/40609
Reviewed-by: John Liang <johliang00@gmail.com>
Reviewed-by: Pratap Chakravarthy <prataprc@couchbase.com>
Tested-by: Pratap Chakravarthy <prataprc@couchbase.com>

======================================================================================================================
COMMENTS
======================================================================================================================
Author: prataprc
Date: 2014-08-19 16:14:06.000000000
Message: 
Change has been successfully cherry-picked as df08893a33d22045c302de486d2afca80b746f3a
----------------------------------------------------------------------------------------------------------------------
