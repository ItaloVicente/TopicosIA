======================================================================================================================
DESCRIPTION:

Bug 494478: StereotypeElementListener dispatches events too early during undo/redo
https://bugs.eclipse.org/bugs/show_bug.cgi?id=494478

Restore the post-commit timing of the dispatch of custom notifications for stereotype applications generated by undo and redo of commands.
This ensures that, for example, Adapters attached directly to objects
are not notified of unapplication of a stereotype during undo before
that stereotype is actually unapplied.

The pre-commit timing of the original notifications from command
execution is preserved because:

* they do not have the problem of preceding the actual model changes
* pre-commit listeners such as applied-stereotype display edit-policies
  still need to receive and react to these notifications before commit
* post-commit listeners will still receive these also, as before

Delaying the notifications to post-commit phase for undo/redo should not break any listeners' timing assumptions because only post-commit listeners could have received them, anyways:  undo/redo transactions do not have the pre-commit (triggers) phase.

(cherry-picked from master)

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Christian Damus
Date: 2016-05-26 18:53:27.000000000
Message: 
Uploaded patch set 1.
----------------------------------------------------------------------------------------------------------------------
Author: CI Bot
Date: 2016-05-26 18:53:34.000000000
Message: 
Patch Set 1:

Build Started https://hudson.eclipse.org/papyrus/job/Papyrus-Gerrit/7538/
----------------------------------------------------------------------------------------------------------------------
Author: CI Bot
Date: 2016-05-26 19:53:48.000000000
Message: 
Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/papyrus/job/Papyrus-Gerrit/7538/ : SUCCESS
----------------------------------------------------------------------------------------------------------------------
Author: Alain Le Guennec
Date: 2016-05-27 07:55:30.000000000
Message: 
Patch Set 1:

Looks good to me. Thanks!
----------------------------------------------------------------------------------------------------------------------
Author: Christian Damus
Date: 2016-05-27 12:07:44.000000000
Message: 
Patch Set 1: Code-Review+2
----------------------------------------------------------------------------------------------------------------------
Author: Gerrit Code Review
Date: 2016-05-27 12:07:47.000000000
Message: 
Change has been successfully merged into the git repository by Christian W. Damus
----------------------------------------------------------------------------------------------------------------------
