======================================================================================================================
DESCRIPTION:

Bug 501074 - [Papyrus DSML Validation] URI should be read from UML attribute "URI" instead from EPackage stereotype

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Ansgar Radermacher
Date: 2016-09-12 16:03:42.000000000
Message: 
Uploaded patch set 1.
----------------------------------------------------------------------------------------------------------------------
Author: CI Bot
Date: 2016-09-12 16:03:49.000000000
Message: 
Patch Set 1:

Build Started https://hudson.eclipse.org/papyrus/job/Papyrus-Gerrit/8611/
----------------------------------------------------------------------------------------------------------------------
Author: CI Bot
Date: 2016-09-12 16:46:33.000000000
Message: 
Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/papyrus/job/Papyrus-Gerrit/8611/ : SUCCESS
----------------------------------------------------------------------------------------------------------------------
Author: Christian Damus
Date: 2016-09-12 19:08:32.000000000
Message: 
Patch Set 1:

(3 comments)
Line:61, plugins/uml/tools/org.eclipse.papyrus.uml.tools.utils/src/org/eclipse/papyrus/uml/tools/utils/StaticProfileUtil.java -> I'm fairly certain that in the UML2 API's UML-to-Ecore conversion, the nsURI in the EPackage stereotype takes precedence over the URI set in the UML package.  This code here should be consistent with that, as UML2 will have generated a package registry extension accordingly.

In general, because the purpose of the Ecore profile is to control the UML-to-Ecore transformation, I think the Ecore stereotype attributes takes precedence over any corresponding UML attribute in the UML2 API.

Line:65, plugins/uml/tools/org.eclipse.papyrus.uml.tools.utils/src/org/eclipse/papyrus/uml/tools/utils/StaticProfileUtil.java -> This could be null or an empty string, neither of which is a valid NS URI.

Line:68, plugins/uml/tools/org.eclipse.papyrus.uml.tools.utils/src/org/eclipse/papyrus/uml/tools/utils/StaticProfileUtil.java -> Empty string is not a valid NS URI.  UML2 computes a default NS URI, which can become complex in the case of nested profiles.

Maybe it would be easier overall just to invoke the UMLUtil.UML2EcoreConverter to create an EPackage definition from the UML and get the exact NS URI from the result?  Then it will be sure to match what is generated by UML2 in the Ecore model and code.

----------------------------------------------------------------------------------------------------------------------
Author: Gerrit Code Review
Date: 2016-09-13 09:51:07.000000000
Message: 
Change has been successfully rebased as 960a6b61c78c501f10636dada69c0c0bad13274e by Ansgar Radermacher
----------------------------------------------------------------------------------------------------------------------
