======================================================================================================================
DESCRIPTION:

MB-24432: Store a seqno to _local to determine when a CAS is a HLC value

Add a new field to _local/vbstate called hlc_epoch, this is a seqno
which we will later use to determine if a value has a CAS that is
a HLC (as opposed to a CAS generated in 3.x).

This persisted seqno will be used in the future to determine which
items can be tagged with a last-update virtual xattr (i.e. items we
know that the CAS is HLC generated as opposed to a CAS generated by
3.x).

Change-Id: I5ef5a8a08b06e69e3160ed71524f74c3053fd59e

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Jim Walker
Date: 2017-06-13 19:18:39.000000000
Message: 
Uploaded patch set 4.
----------------------------------------------------------------------------------------------------------------------
Author: Build Bot
Date: 2017-06-13 19:31:17.000000000
Message: 
Patch Set 4: Verified-1

Build Failed 

http://cv.jenkins.couchbase.com/job/kv_engine-linux-master/537/ : FAILURE

Compile error at /home/couchbase/jenkins/workspace/kv_engine-linux-master/kv_engine/engines/ep/tests/module_tests/evp_store_single_threaded_test.cc:1233:33:
error: 'runReadersUntilWarmedUp' was not declared in this scope
 ( http://cv.jenkins.couchbase.com//job/kv_engine-linux-master/537/ )

http://cv.jenkins.couchbase.com/job/kv_engine-threadsanitizer-master/540/ : FAILURE

Compile error at /home/couchbase/jenkins/workspace/kv_engine-threadsanitizer-master/kv_engine/engines/ep/tests/module_tests/evp_store_single_threaded_test.cc:1233:9:
error: use of undeclared identifier 'runReadersUntilWarmedUp'
 ( http://cv.jenkins.couchbase.com//job/kv_engine-threadsanitizer-master/540/ )

http://cv.jenkins.couchbase.com/job/kv_engine-addresssanitizer-master/531/ : FAILURE

Compile error at /home/couchbase/jenkins/workspace/kv_engine-addresssanitizer-master/kv_engine/engines/ep/tests/module_tests/evp_store_single_threaded_test.cc:1233:9:
error: use of undeclared identifier 'runReadersUntilWarmedUp'
 ( http://cv.jenkins.couchbase.com//job/kv_engine-addresssanitizer-master/531/ )

http://cv.jenkins.couchbase.com/job/kv_engine-clang_analyzer-master/482/ : FAILURE

Compile error at /home/couchbase/jenkins/workspace/kv_engine-clang_analyzer-master/kv_engine/engines/ep/tests/module_tests/evp_store_single_threaded_test.cc:1233:33:
error: 'runReadersUntilWarmedUp' was not declared in this scope
 ( http://cv.jenkins.couchbase.com//job/kv_engine-clang_analyzer-master/482/ )

http://cv.jenkins.couchbase.com/job/kv_engine-windows-master/506/ : FAILURE

Compile error at ..\kv_engine\engines\ep\tests\module_tests\evp_store_single_threaded_test.cc(1233): error C3861: 'runReadersUntilWarmedUp': identifier not found ( http://cv.jenkins.couchbase.com//job/kv_engine-windows-master/506/ )
----------------------------------------------------------------------------------------------------------------------
Author: Jim Walker
Date: 2017-06-14 11:56:33.000000000
MISMATCHED INLINE COMMENT
Line:2157, engines/ep/src/couch-kvstore/couch-kvstore.cc -> I'm sure using empty didn't work here - will double check. I believe the string returned by cJSON isn't "empty" in the std::string sense
----------------------------------------------------------------------------------------------------------------------
