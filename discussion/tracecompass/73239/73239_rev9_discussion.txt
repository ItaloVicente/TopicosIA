======================================================================================================================
DESCRIPTION:

analysis.lami: correctly handle Number (double, long etc.) type graphing

LTTng analysis return mostly long values either for the time stamps or actual
measurements. SWTChart, on the other hand, deal only with "double" numerical
values. Casting long to double causes a loss of precision for big long value
(e.g time stamps).

E.g:
Loss of precision occurs when time ranges with a big minimal value (2^62) but
with little delta (1 ns) between events exist. Graph generated from such time
ranges as an axis would result in a single dot which is a clear problem.

The presented solution uses linear mapping to preserve resolution
and precision when possible.

The linear mapping requires two ranges: the internal range and the external
range.

Each graph is responsible to provide an internal LamiGraphRange. This range is
the internal representation in double in which all raw (external) value are to
be mapped. For now the default internal range is 0 to 1.

The external range [raw values range] is generated by finding the minimal value
and maximal values of aspects to be plotted.

Each point is then mapped to corresponding value from the internal range:

internalValue = (( externalValue - externalRange.minimum ) * ( internalRange.delta / external.delta )) + internalRange.minimum

Since the default internal range is from 0 to 1 al raw values are mapped to a
value from 0 to 1.

On graph tick generation axis formatter transform internal representation to
external representation and format the result.

Other change:
- Aspects now return their numerical values via resolveNumber to ensure no casting
is done.
- Move axis formatter to ui plugin.

Bug: 493941

Change-Id: I289180e10a7f1cbf6ecdd1beba93549b8fbe4c23
Signed-off-by: Jonathan Rajotte <jonathan.rajotte-julien@efficios.com>

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Jonathan Rajotte Julien
Date: 2016-05-27 17:40:18.000000000
Message: 
Uploaded patch set 9.
----------------------------------------------------------------------------------------------------------------------
Author: CI Bot
Date: 2016-05-27 17:40:25.000000000
Message: 
Patch Set 9:

Build Started https://hudson.eclipse.org/tracecompass/job/tracecompass-gerrit/8699/
----------------------------------------------------------------------------------------------------------------------
Author: CI Bot
Date: 2016-05-27 18:22:53.000000000
Message: 
Patch Set 9: Code-Review+1

Build Successful 

https://hudson.eclipse.org/tracecompass/job/tracecompass-gerrit/8699/ : SUCCESS
----------------------------------------------------------------------------------------------------------------------
Author: Patrick Tasse
Date: 2016-05-27 19:52:32.000000000
Message: 
Patch Set 9: Code-Review-1

(3 comments)
Line:750, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> the ?

Line:761, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> The blank lines don't work in Javadoc unless you use <p>.

I think the long explanation should be in the method description, and keep the parameter description short.

I don't feel the example is really necessary if the description is clear.

If I may suggest a description:

Get a {@link LamiGraphRange} that covers all data points in the result table.
<p>
The returned range will be the mimimum and maximum of the resolved values of the passed aspects for all result entries. If <code>clampToZero</code> is true, a positive minimum value will be clamped down to zero.

@param clampToZero
          If true, a positive minimum value will be clamped down to zero

Line:780, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> If you want, you could remove the compareTo and use

  min = min.min(BigDecimal.ZERO);

----------------------------------------------------------------------------------------------------------------------
Author: Jonathan Rajotte Julien
Date: 2016-05-27 20:22:38.000000000
Message: 
Patch Set 9:

(2 comments)
Line:761, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> Sure. I prefer your version. Simply fixed a small typo and applied as is.

Thanks for the info regarding blank line

Line:780, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> +1

----------------------------------------------------------------------------------------------------------------------
Author: Jonathan Rajotte Julien
Date: 2016-05-27 20:24:20.000000000
Message: 
Patch Set 9:

Btw no need to click -1 each time I'll wait for your approval and it will save you a click and mouse movement :P
----------------------------------------------------------------------------------------------------------------------
Author: Gerrit Code Review
Date: 2016-05-31 22:54:06.000000000
Message: 
Change has been successfully cherry-picked as 5b973e7c65f168e79139fdc0045dda56ff71f650 by Alexandre Montplaisir
----------------------------------------------------------------------------------------------------------------------
