======================================================================================================================
DESCRIPTION:

analysis.lami: correctly handle Number (double, long etc.) type graphing

LTTng analysis return mostly long values either for the time stamps or actual
measurements. SWTChart, on the other hand, deal only with "double" numerical
values. Casting long to double causes a loss of precision for big long value
(e.g time stamps).

E.g:
Loss of precision occurs when time ranges with a big minimal value (2^62) but
with little delta (1 ns) between events exist. Graph generated from such time
ranges as an axis would result in a single dot which is a clear problem.

The presented solution uses linear mapping to preserve resolution
and precision when possible.

The linear mapping requires two ranges: the internal range and the external
range.

Each graph is responsible to provide an internal LamiGraphRange. This range is
the internal representation in double in which all raw (external) value are to
be mapped. For now the default internal range is 0 to 1.

The external range [raw values range] is generated by finding the minimal value
and maximal values of aspects to be plotted.

Each point is then mapped to corresponding value from the internal range:

internalValue = (( externalValue - externalRange.minimum ) * ( internalRange.delta / external.delta )) + internalRange.minimum

Since the default internal range is from 0 to 1 al raw values are mapped to a
value from 0 to 1.

On graph tick generation axis formatter transform internal representation to
external representation and format the result.

Other change:
- Aspects now return their numerical values via resolveNumber to ensure no casting
is done.
- Move axis formatter to ui plugin.

Bug: 493941

Change-Id: I289180e10a7f1cbf6ecdd1beba93549b8fbe4c23
Signed-off-by: Jonathan Rajotte <jonathan.rajotte-julien@efficios.com>

======================================================================================================================
COMMENTS
======================================================================================================================
Author: CI Bot
Date: 2016-05-19 23:14:48.000000000
Message: 
Patch Set 3:

Build Started https://hudson.eclipse.org/tracecompass/job/tracecompass-gerrit/8599/
----------------------------------------------------------------------------------------------------------------------
Author: CI Bot
Date: 2016-05-19 23:56:25.000000000
Message: 
Patch Set 3: Code-Review+1

Build Successful 

https://hudson.eclipse.org/tracecompass/job/tracecompass-gerrit/8599/ : SUCCESS
----------------------------------------------------------------------------------------------------------------------
Author: Patrick Tasse
Date: 2016-05-20 14:39:05.000000000
Message: 
Patch Set 3: Code-Review-1

(33 comments)
Line:17, /COMMIT_MSG -> I'm still getting LTTng-Analysis script errors when I try to run an analysis with a selected time range, so I'm not sure how to verify with a small range.

Line:94, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiDurationAspect.java -> This class's implementation or resolveNumber() can only return a Long, so you could return Long.compare(d1.longValue(), d2.longValue()).

Line:97, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiGenericAspect.java -> This class's implementation or resolveNumber() can only return a Double, so you could return Double.compare(d1.doubleValue(), d2.doubleValue()).

Line:90, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiIRQNumberAspect.java -> This class's implementation or resolveNumber() can only return a Long, so you could return Long.compare(d1.longValue(), d2.longValue()).

Line:95, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiProcessPIDAspect.java -> This class's implementation or resolveNumber() can only return a Long, so you could return Long.compare(d1.longValue(), d2.longValue()).

Line:69, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiProcessTIDAspect.java -> extra space

Line:95, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiProcessTIDAspect.java -> This class's implementation or resolveNumber() can only return a Long, so you could return Long.compare(d1.longValue(), d2.longValue()).

Line:93, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiTimeRangeBeginAspect.java -> This class's implementation or resolveNumber() can only return a Long, so you could return Long.compare(d1.longValue(), d2.longValue()).

Line:94, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiTimeRangeDurationAspect.java -> This class's implementation or resolveNumber() can only return a Long, so you could return Long.compare(d1.longValue(), d2.longValue()).

Line:90, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiTimeRangeEndAspect.java -> This class's implementation or resolveNumber() can only return a Long, so you could return Long.compare(d1.longValue(), d2.longValue()).

Line:90, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiTimestampAspect.java -> This class's implementation or resolveNumber() can only return a Long, so you could return Long.compare(d1.longValue(), d2.longValue()).

Line:32, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/types/LamiIRQ.java -> Why not an Integer?

Line:27, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> Reformat with Ctrl+Shift+F

Line:48, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> format

Line:94, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> format

Line:108, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> format

Line:116, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> If it's an instance of Number then it can't be null

Line:117, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> make sure you don't auto-format this method ;)

Line:120, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> the super implementation can't return null

Line:132, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> Isn't this also a case where you want to return externalRange.getMinimum() ?

Line:139, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> Maybe extract to constant

Line:97, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiTimeStampFormat.java -> format

Line:111, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiTimeStampFormat.java -> format

Line:132, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiTimeStampFormat.java -> You're not checking zero external range like in the other class, is this intentional?

Line:137, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiTimeStampFormat.java -> constant

Line:135, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiBarChartViewer.java -> The the

Line:198, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiBarChartViewer.java -> you could just use = 0.0;

Line:447, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiBarChartViewer.java -> Unrelated to this patch, but I noticed that if you have too many categories here, the background of each successive label being drawn at very close pixel intervals just wipes out every label that is drawn, except the last one.

This is probably something SWTChart should handle better. Maybe the label should be drawn with transparent background. Maybe not all labels should be drawn (that's what Excel does).

If you want to have a workaround here, you could limit the number of categories (spread out over the whole range with a modulo that depends on the total number), the other categories can be put to " " ("" or null doesn't work). But then this still hides the last character of the drawn categories, so maybe you can add a space at the end of the the categories you keep.

Line:297, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiScatterViewer.java -> extra line?

Line:385, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> You can use max.max() and min.min() from BigDecimal.

Also, indentation is wrong.

Line:401, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> I had a comment on another patch that it should support down to nanoseconds if the range is < 1 ms. This could be fixed with this patch?

Line:750, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> and maximal

Line:798, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> Do you have to consider the case where internalRange is zero?

----------------------------------------------------------------------------------------------------------------------
Author: Jonathan Rajotte Julien
Date: 2016-05-20 17:30:28.000000000
Message: 
Patch Set 3:

(13 comments)
Line:17, /COMMIT_MSG -> You can define a custom external one with the following stub.

https://bugs.eclipse.org/bugs/attachment.cgi?id=261905

I populated the data for a good test case for this patch.

Line:32, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/types/LamiIRQ.java -> Good catch this should not have been in this patch.

Line:116, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> So it could be:

if (obj instanceof Number && toAppendTo != null)

Since instance of return false on null value ?

I was not aware of the fact that instanceof can be used on null value. 

Thanks!

Line:117, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> ?

Line:120, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> Matter of interface. Is there a solution to that ?

Line:132, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> By setting the range to 1 we recover the  externalRange.getMinimum() systematically with the next operation.

Let say you have internal value of 0 and the external value is 10 and is the only value so range should equal to 0. We set it to one. The formula give us ->

((0-0)*1/1) + 10 = 10

Did I forgot a case?

Line:139, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> Forgot this one ! I think it shows up at some other place will look on that.

Line:132, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiTimeStampFormat.java -> Good catch it should be done like the other one. Or I'll find why I did it like this while changing it :)

Line:198, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiBarChartViewer.java -> Well some people I will not name do not like constant even 0.0.

Line:447, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiBarChartViewer.java -> Yeah the to many labels is a pain. The real solutions to that is either aggregation of categories (histogram) based on user input to reduce categories or user common sense regarding the use of the bar chart (the kind of thing that is going extinct ;)). 

Otherwise we end up showing partial information. I would be more interested in disabling axis labeling altogether when it's to crowded and introducing a cursor just like the scatter chart with a tool tip for value of the snapped category/series.

The future looks nice !

Line:385, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> +1

Line:401, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> A litle bit outside the scope of this patch so I would be more interested in doing another one for this bug.

Line:798, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> good catch !

----------------------------------------------------------------------------------------------------------------------
Author: Patrick Tasse
Date: 2016-05-20 17:46:10.000000000
Message: 
Patch Set 3:

(5 comments)
Line:117, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> Because I suggested to do Ctrl+Shift+F on Javadoc above, but if you do it on the whole file it will split this line and merge the BigDecimal calculation below on a single line. Just wanted to make sure you don't inadvertently change this...

Line:120, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> Never use @NonNullByDefault? ;)

Line:132, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> I don't know if it can happen, but if interval value is 0.5 in [0.0, 1.0] internal range, the calculation would give 10.5 in [10.0, 10.0] external range.

Anyways if external range is 0 you can return early its minimum value and avoid any calculation.

Line:198, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiBarChartViewer.java -> How about compromise

Double yValue = ZERO;

;)

Line:802, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> that was the other place you were looking for ;)

----------------------------------------------------------------------------------------------------------------------
Author: Jonathan Rajotte Julien
Date: 2016-05-20 19:04:21.000000000
Message: 
Patch Set 3:

(4 comments)
Line:117, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> +1

Line:120, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> I wish :P

Line:132, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> Let's go this route to simplify our life.

Line:198, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiBarChartViewer.java -> Sold

----------------------------------------------------------------------------------------------------------------------
Author: Jonathan Rajotte Julien
Date: 2016-05-20 20:40:43.000000000
Message: 
Patch Set 3:

(23 comments)
Line:94, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiDurationAspect.java -> Done

Line:97, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiGenericAspect.java -> Done

Line:90, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiIRQNumberAspect.java -> Done

I changed the Number inner type to Integer so I used Integer.compareTo

Line:95, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiProcessPIDAspect.java -> Done

Line:69, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiProcessTIDAspect.java -> Done

Line:95, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiProcessTIDAspect.java -> Done

Line:93, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiTimeRangeBeginAspect.java -> Done

Line:94, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiTimeRangeDurationAspect.java -> Done

Line:90, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiTimeRangeEndAspect.java -> Done

Line:90, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiTimestampAspect.java -> Done

Line:32, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/types/LamiIRQ.java -> Done

Line:48, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> Done

Line:94, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> Done

Line:116, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> Done

Line:117, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> Done

Line:120, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> So let's agree to keep it like that?

Line:132, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> Actually returning 10.5 would make sense since this is just label for swtchart. Even if our internal range is [10,10] it make sense for swtchart to maybe show a little bit to the left or right.

Ex:
- Range = 1
  http://i.imgur.com/PitqwF6.png 
  Notice the y axis tick labeling around 0.

- Return external minimum
  http://i.imgur.com/tMkIg53.png
  There is no tick since swtchart prevent putting the same tick    twice.

I personally find the one with actual tick more relevant and even more since we do not expect swtchart to do stuff for us that could be a simple side effect of another policy or what not.

Line:132, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiTimeStampFormat.java -> Done

Took the externalRange = 1 way here again.

Line:137, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiTimeStampFormat.java -> Done

Line:135, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiBarChartViewer.java -> Done

Line:198, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiBarChartViewer.java -> Oh look like I used the Double.valuOf since ZERO was a long ... well I decided to go with a ZERO_DOUBLE.

Line:297, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiScatterViewer.java -> Done

Line:798, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/viewers/LamiXYChartViewer.java -> Actually if the internal range is zero the result is valid and will always map to internalRange.getMinimum() which is the only possible value (max = min for delta = 0)

The problematic case of externalRange = 0 is taken care of in the first if.

----------------------------------------------------------------------------------------------------------------------
Author: Patrick Tasse
Date: 2016-05-24 20:16:08.000000000
Message: 
Patch Set 3:

(1 comment)
Line:132, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> I see the improvement of changing the axis range to be non-zero, but this is not the place to do it? Doesn't the range here only affect how the axis label from a number is formatted? Then I'm not sure how fiddling with the external value will help.

----------------------------------------------------------------------------------------------------------------------
Author: Patrick Tasse
Date: 2016-05-24 20:32:30.000000000
Message: 
Patch Set 3:

(1 comment)
Line:132, analysis/org.eclipse.tracecompass.analysis.lami.ui/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/ui/format/LamiDecimalUnitFormat.java -> In the Lami chart implementation:

- The internal range is always [0.0, 1.0] as per LamiBarChartViewer and LamiScatterViewer

- If the external range is zero the internal value is always 0.0 as per LamiXYChartViewer.getInternalDoubleValue()

So in the calculation below, if the external range is zero the formatted value will resolve to the external minimal value.

But I think that for correctness of this class which should not depend on the user implementation, it should not be possible to have an external value that is out of the bounds of the external range. So I believe that it should explicitly use the external minimal value if the external range is zero.

----------------------------------------------------------------------------------------------------------------------
Author: Patrick Tasse
Date: 2016-05-24 20:35:40.000000000
Message: 
Patch Set 3:

(1 comment)
Line:97, analysis/org.eclipse.tracecompass.analysis.lami.core/src/org/eclipse/tracecompass/internal/provisional/analysis/lami/core/aspect/LamiGenericAspect.java -> Not done?

----------------------------------------------------------------------------------------------------------------------
Author: Gerrit Code Review
Date: 2016-05-31 22:54:06.000000000
Message: 
Change has been successfully cherry-picked as 5b973e7c65f168e79139fdc0045dda56ff71f650 by Alexandre Montplaisir
----------------------------------------------------------------------------------------------------------------------
