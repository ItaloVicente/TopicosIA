======================================================================================================================
DESCRIPTION:

NCBC-1205: Allow bucket specific logging

Motivation
----------
Separate and categorize logs from certain bucket within
cluster.

Modifications
-------------
Add a EnableBucketInstanceLogging property on the ClientConfiguration and
associated classes that when enabled makes the bucket name be included
when logging is enabled. Change the Log message so that the bucket name
will be included. Change the Log construction to create the correct logger
depending upon configuration.

Result
------
When EnableBucketInstanceLogging is enabled, the bucket name will be
included with the logs.

Change-Id: I437b91b392cf3655866f84841fb6d4f454c02c41

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Jeffry Morris
Date: 2016-09-27 18:08:29.000000000
Message: 
Uploaded patch set 3.
----------------------------------------------------------------------------------------------------------------------
Author: Jeffry Morris
Date: 2016-09-27 19:08:31.000000000
Message: 
Patch Set 3: Code-Review-1

Petr -

I want to verify that the log output is as you expect: the current patch set only applies to logging at the IBucket implementation level ATM. I was expected the change to go through all layers of the SDK: node selection, IO, mapping etc. 

LMK if you want to build on this so that the bucket specific logging goes through all layers of the SDK. 

-Jeff
----------------------------------------------------------------------------------------------------------------------
Author: Petr Drastil
Date: 2016-09-27 23:18:47.000000000
Message: 
Patch Set 3:

> Petr -
 > 
 > I want to verify that the log output is as you expect: the current
 > patch set only applies to logging at the IBucket implementation
 > level ATM. I was expected the change to go through all layers of
 > the SDK: node selection, IO, mapping etc.
 > 
 > LMK if you want to build on this so that the bucket specific
 > logging goes through all layers of the SDK.
 > 
 > -Jeff

 > Petr -
 > 
 > I want to verify that the log output is as you expect: the current
 > patch set only applies to logging at the IBucket implementation
 > level ATM. I was expected the change to go through all layers of
 > the SDK: node selection, IO, mapping etc.
 > 
 > LMK if you want to build on this so that the bucket specific
 > logging goes through all layers of the SDK.
 > 
 > -Jeff

Jeff,
thanks for comment on this change that I tried to keep as minimal as possible. I agree that there can be some other areas that can benefit from this approach if it makes sense and I can add more patch sets if you can point me to such areas. However I would like to discuss what the expected logger key / behavior in these areas should be.

The buckets are simple because internally Common.Logging SDK translates GetLogger<IBucket>() to GetLogger(string key) with the key typeof(IBucket).FullName. If you extend such namespace with bucket name the end-user can easily predict the named instance and process logs generated by the logger with such key.

On the other hand what logger key would you expect for the code that implements for example IIOService? In this case you have to create some kind of unique key to identify created instance such as Couchbase.IO.IIOService.[Pooled|Multiplexing]. Or do you expect that the logger key will be somehow tied to concrete bucket instance? This is my opinion kinda heavy change in your interfaces, how the instances are created and/or how the bucket name should be retrieved for given operation.

Petr
----------------------------------------------------------------------------------------------------------------------
Author: Jeffry Morris
Date: 2020-01-23 05:18:12.000000000
Message: 
Abandoned
----------------------------------------------------------------------------------------------------------------------
