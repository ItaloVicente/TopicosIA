======================================================================================================================
DESCRIPTION:

Make getNumItemsForPersistence() more thread-safe

Change-Id: I543248e29bd3c1b2bb9a99547cd150cfa41b3463

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Chiyoung Seo
Date: 2011-05-31 11:05:42.000000000
Message: 
Uploaded patch set 3.
----------------------------------------------------------------------------------------------------------------------
Author: Bin Cui
Date: 2011-05-31 19:36:54.000000000
Message: 
Patch Set 3: Looks good to me, approved

This getNumItemsForPersistence() will be called  so frequently that querylock will have negative impact that worth revisit.
----------------------------------------------------------------------------------------------------------------------
Author: Chiyoung Seo
Date: 2011-05-31 19:50:10.000000000
Message: 
Patch Set 3: Verified


----------------------------------------------------------------------------------------------------------------------
Author: Chiyoung Seo
Date: 2011-05-31 19:50:10.000000000
Message: 
Change has been successfully cherry-picked as 492a37a93e872753b76506971d0186de46335c0b.
----------------------------------------------------------------------------------------------------------------------
