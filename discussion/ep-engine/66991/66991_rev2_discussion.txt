======================================================================================================================
DESCRIPTION:

MB-20623: Remove 'fetches' vector from MutationLogHarvester::apply

MutationLogHarvester::apply() builds a vector of keys (`fetches`) to
fetch from disk. This is essentially identical to the contents of
`committed`, except it only contains keys which currently exist in the
VBucket.

We can optimize this by removing fetches, and instead erasing the
elements from `committed[vb]` which are no longer valid. This also
means we no longer have to check for duplicates in batchWarmupCallback
(which was kinda pointless even before), as the data structure passed
in is now a set (and hence cannot by definition contain dupes).

Results in a reduction in the memory used by these temporary warmup
data structures - from 3876MB to 3218MB (17%) for the following
workload:

* 1 bucket, 10,000MB quota, 1 node.
* 30M items, 300bytes each. Dataset generated by:
    cbc-pillowfight -U couchbase://localhost:12000 -I 30000000 -m 300 -M 300 -t16

Change-Id: I1c2e480e53626be41fa20dcd44abe4d6fa327e4c

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Dave Rigby
Date: 2016-08-24 11:35:11.000000000
Message: 
Uploaded patch set 2: Patch Set 1 was rebased.
----------------------------------------------------------------------------------------------------------------------
Author: Build Bot
Date: 2016-08-24 11:35:21.000000000
Message: 
Patch Set 2:

Build Started http://factory.couchbase.com/job/ep-engine-gerrit-sherlock/718/
----------------------------------------------------------------------------------------------------------------------
Author: Build Bot
Date: 2016-08-24 11:35:29.000000000
Message: 
Patch Set 2:

Branch restricted. PLEASE READ this URL: 

http://server.jenkins.couchbase.com/job/restricted-branch-check/21748/artifact/restricted.html : FAILURE
----------------------------------------------------------------------------------------------------------------------
Author: Build Bot
Date: 2016-08-24 11:48:09.000000000
Message: 
Patch Set 2: Verified-1

Build Failed 

http://factory.couchbase.com/job/ep-engine-gerrit-sherlock/718/ : ABORTED
----------------------------------------------------------------------------------------------------------------------
