======================================================================================================================
DESCRIPTION:

Move flow control logic into its own function

Change-Id: Iab3e1afdee4666ff3ea07cdda06445d1f9933df3

======================================================================================================================
COMMENTS
======================================================================================================================
Author: Mike Wiederhold
Date: 2014-07-07 19:24:29.000000000
Message: 
Uploaded patch set 1.
----------------------------------------------------------------------------------------------------------------------
Author: Chiyoung Seo
Date: 2014-07-07 19:37:47.000000000
Message: 
Patch Set 1: Code-Review+2
----------------------------------------------------------------------------------------------------------------------
Author: Mike Wiederhold
Date: 2014-07-07 20:16:24.000000000
Message: 
Patch Set 1: Verified+1
----------------------------------------------------------------------------------------------------------------------
